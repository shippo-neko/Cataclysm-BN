# 電力網

電力網とは、車両の各部品がバッテリー電力を共有する方法と同様に、建物内における電力的な接続を指します。

# 特徴

現在、以下の備品のみが電力網と連動します。

- 設置型ソーラーパネル: (避難センターの上部にあるものなど) エネルギーを生成します。
- 設置型バッテリー : エネルギーを蓄えます。これを調査すると、特定のバッテリー内および電力網全体の電力情報が表
  示されます。
- バッテリー充電器:車両の充電器/充電ステーションと同様に機能します。充電式バッテリーやそれを含むアイテムを充電
  器に配置すると、設置型バッテリーの電力が消費され、代わりに設置したアイテムとバッテリーに充電されます。
- 電圧計を使用して以下を行うことができます。
  - 電力網の接続を確認する。
  - 蓄積しているエネルギー量を確認する。
  - 電力網の接続を延長する。
- オーブン : ホットプレートと同様に機能します。電力網の蓄電量に等しい電力を持ちます。
- ジャンパーケーブルコネクタ : 車両を電力網に接続します。使用するには、ジャンパーケーブルを車両に接続した後、このコネクタに接続します。接続されると、車両と電力網は総電力を共有します。通常はコネクタを通じて送電する前に、各自のバッテリーを充電または放電します。
- 冷蔵庫
- フロアランプ
- 電気窯
- 食品乾燥機
- フードプロセッサー
- 真空シーラー
- アーク溶接機
- 電気鍛冶場
- 電気分解キット

# 電力網のサイズ

電力網は、建物のオーバーマップタイル ('M'キーで開くマップに表示されるタイル。ローカルマップには24x24タイル) で構成されます。ほとんどの都市の建物は、固有の電力網を持っています。例えば、屋根と地下室を持つ家は、屋根にソーラーパネル、フロアにオーブン、地下室にバッテリーがある場合、ソーラーパネルで発電された電気をバッテリーに充電し、そのエネルギーを使ってオーブンを使用できます。

建物がないオーバーマップタイルは、そのオーバーマップタイル内でのみ電力網を持ちます。現在、2つのコネクタ、2本のジャンパーケーブル、および車両を使用する以外の方法で電力網同士を接続する方法はありません。

# MOD制作

電力網を使用して偽のアイテム (fake item)に電力を供給する備品を作成するには、まずその偽のアイテムに`"USES_GRID_POWER"`フラグを設定し、次に備品の`"crafting_pseudo_item"`をそのアイテムのIDに設定します。

例として、オーブンアイテムの定義は以下の通りです。

```json
{
  "id": "fake_oven",
  "copy-from": "fake_item",
  "type": "TOOL",
  "name": { "str": "oven" },
  "sub": "hotplate",
  "max_charges": 1000,
  "flags": ["USES_GRID_POWER"]
}
```

そして、オーブンは、以下のように使用します。

```json
"crafting_pseudo_item": "fake_oven"
```

現在、電力網は備品の一部として使用される偽のアイテムにのみ電力を供給します。

# 電力網の手動追加 (マップデザイン向け)

警告: これはマップデザイン向けです。ファイルを編集せずにゲーム内で電力網を構築することができます。
ソーラーパネルとバッテリーを構築するだけです。ジャンパーケーブルとコネクタは、電力網を車両と接続できます。

新しく家を建てた場合、その家には電力網がないことに気づくでしょう。新しい家で電力網を使用するには、ゲームのセーブフォルダに格納されているオーバーマップファイル（o.0.1などの名前）を取得して編集する必要があります。

必要な記述は次の通りです。

```json
"electric_grid_connections":[[[0,0,0]], ... ... ... ]}
```

この場所にあなたの座標を追加します。あなたの家がオーバーマップ座標 `0'113, 2'56`にある場合、対応するオーバーマップファイルは`o.0.2` であり、追加する座標は `[113,56,0]` です（またはあなたのZ座標）。

異なる階層を接続するには、以下のように座標を追加します。

```json
"electric_grid_connections":[[[113,56,0],[0,0,1]],[[113,56,1],[0,0,-1]]... ... ... ]}
```

`[0,0,1]` は、この座標が上の階の階段と電力を共有することを意味し、`[0,0,-1]` は下の階を意味します。あなたの家がオフィスビルや市庁舎ほどの大きさである場合、`[0,1,0]` や `[1,0,0]` も機能します。これは実際に大規模な建物の電力網が機能する方法です。
